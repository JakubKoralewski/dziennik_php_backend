(function(t){function e(e){for(var o,r,s=e[0],u=e[1],l=e[2],d=0,f=[];d<s.length;d++)r=s[d],i[r]&&f.push(i[r][0]),i[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);c&&c(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(o=!1)}o&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},i={app:0},a=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0041":function(t,e,n){},"058b":function(t,e,n){"use strict";var o=n("9e91"),i=n.n(o);i.a},"0e09":function(t,e,n){},1645:function(t,e,n){},"1ae5":function(t,e,n){"use strict";var o=n("fe51"),i=n.n(o);i.a},"1c7a":function(t,e,n){"use strict";var o=n("4623"),i=n.n(o);i.a},"319a":function(t,e,n){"use strict";var o=n("0e09"),i=n.n(o);i.a},4623:function(t,e,n){},"4f67":function(t,e,n){"use strict";var o=n("1645"),i=n.n(o);i.a},"5c0b":function(t,e,n){"use strict";var o=n("5e27"),i=n.n(o);i.a},"5e27":function(t,e,n){},"77b0":function(t,e,n){"use strict";var o=n("b004"),i=n.n(o);i.a},"7bb7":function(t,e,n){},"9d8c":function(t,e,n){t.exports=n.p+"img/hogwarts.1faa4852.jpg"},"9e91":function(t,e,n){},a159:function(t,e,n){},a70c:function(t,e,n){},b004:function(t,e,n){},b165:function(t,e,n){"use strict";var o=n("a159"),i=n.n(o);i.a},b819:function(t,e,n){"use strict";var o=n("a70c"),i=n.n(o);i.a},b98a:function(t,e,n){},c527:function(t,e,n){"use strict";var o=n("0041"),i=n.n(o);i.a},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"slide"}},[n("router-view",{staticClass:"router-view"})],1)],1)},a=[],r=o["a"].extend({}),s=r,u=(n("5c0b"),n("2877")),l=Object(u["a"])(s,i,a,!1,null,null,null),c=l.exports,d=n("8c4f"),f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"unauthorized"},[o("div",{attrs:{id:"cover"}}),o("img",{staticClass:"bg noselect",attrs:{src:n("9d8c"),unselectable:"on",draggable:"false"}}),o("login",{staticClass:"login",attrs:{"prop-logo":"logo.png",name:"Harwart"}})],1)},p=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login-component"}},[n("div",{attrs:{id:"wrapper"}},[n("div",{attrs:{id:"login"}},[n("div",{attrs:{id:"logo"}},[t._v(t._s(t.propName))]),n("p",{attrs:{id:"subtitle"}},[t._v("Dziennik elektroniczny.")]),n("p",{attrs:{id:"copyright"}},[t._v("© 2019 Jakub Koralewski")]),n("hr"),n("div",{staticClass:"login-inputs",attrs:{id:"login-container"}},[t._v("\n\t\t\t\tLogin:\n\t\t\t\t"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{id:"login",type:"login",placeholder:"Twój login"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),n("div",{staticClass:"login-inputs",attrs:{id:"haslo-container"}},[t._v("\n\t\t\t\tHasło:\n\t\t\t\t"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.haslo,expression:"haslo"}],attrs:{id:"haslo",type:"password",placeholder:"Twoje hasło"},domProps:{value:t.haslo},on:{input:function(e){e.target.composing||(t.haslo=e.target.value)}}})]),n("input",{attrs:{id:"loginButton",type:"button",value:"Zaloguj się"},on:{click:function(e){return t.loginRequest()}}})])])])},v=[],g=n("f499"),m=n.n(g),b=n("774e"),w=n.n(b),S=(n("ac6a"),"https://dziennik-php.herokuapp.com/"),y=o["a"].extend({name:"Login",props:{propName:{type:String,required:!1,default:"Harwart"},propLogo:{type:String,required:!1,default:"logo.png"}},data:function(){return{login:"",haslo:"",loginButton:null,loginInput:null,hasloInput:null,wasLoginSuccessful:!1}},mounted:function(){var t=this;this.loginButton=document.querySelector("#loginButton"),this.loginInput=document.querySelector("input#login"),this.hasloInput=document.querySelector("input#haslo"),w()(document.querySelectorAll("#login, #haslo")).forEach(function(e){e.addEventListener("keyup",function(e){"Enter"===e.key&&(t.loginButton.click(),e.preventDefault())})})},methods:{loginRequest:function(){var t=this,e=this.credentialsValid([this.loginInput,this.hasloInput]);if(0!=e)return console.log("Found invalid inputs",e),this.wasLoginSuccessful||[this.loginInput,this.hasloInput].forEach(function(t){return t.classList.remove("login-failed")}),void this.loginError(e);console.log("login: ".concat(this.login,"\nhaslo: ").concat(this.haslo)),fetch("".concat(S,"api/login.php"),{method:"POST",body:m()({login:this.login,haslo:this.haslo}),headers:{"Content-Type":"application/json; charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}}).then(function(e){return!0!==e.ok&&t.loginError([t.loginInput,t.hasloInput]),e.json()}).then(function(e){console.log(e),!0===e.status&&(console.log("zalogowano."),t.loginSuccessful())}).catch(function(t){console.error(t)})},loginSuccessful:function(){this.wasLoginSuccessful=!0,[this.loginInput,this.hasloInput].forEach(function(t){return t.classList.remove("login-failed")}),this.$router.push("zalogowany")},loginError:function(t){this.wasLoginSuccessful=!1,t.forEach(function(t){t.classList.add("login-failed")})},credentialsValid:function(t){var e=t.map(function(t){return 0==!!t.value?t:null}).filter(function(t){return!!t});return null==e?(console.log("credentials valid"),!0):e}}}),k=y,x=(n("4f67"),Object(u["a"])(k,h,v,!1,null,"cbf56c28",null)),_=x.exports,j=o["a"].extend({components:{Login:_}}),C=j,O=(n("c527"),n("77b0"),Object(u["a"])(C,f,p,!1,null,"2a10604c",null)),z=O.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"authorized"}},[n("NavBar",{attrs:{id:"nav-bar"}}),n("AddButton",{on:{addButtonClick:function(e){return t.addButtonClick()}}}),n("div",{attrs:{id:"content"}},[n("NavTitle",{attrs:{id:"nav-title"}}),t.showNewStudentDialog?n("NewStudent",{on:{newStudentAdded:function(e){t.showNewStudentDialog=!1}}}):t._e(),t.students?n("div",{attrs:{id:"students"}},t._l(t.students,function(t){return n("Student",{key:t.id,class:{invisible:!t.visible},attrs:{student:t}})}),1):t._e()],1)],1)},T=[],A=(n("96cf"),n("3b8d")),E=n("db0c"),B=n.n(E),$=n("cebc"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav",class:{"navbar-hidden":!t.navBarVisible}},[n("div",{attrs:{id:"hide"}},[n("i",{staticClass:"fas fa-arrow-left",class:{"navbar-hidden":!t.navBarVisible},on:{click:function(e){return t.navBarToggle()}}})]),n("div",{attrs:{id:"o-mnie"}},[t._v("O mnie")]),n("div",{attrs:{id:"szkola"}},[t._v("Szkoła")])])},V=[],L=n("5176"),I=n.n(L),R=o["a"].extend({name:"NavBar",data:function(){return{elements:{},navBarVisible:!0}},mounted:function(){var t={navBar:document.querySelector("div.nav")};this.elements=I()(this.elements,t)},methods:{navBarToggle:function(t,e){this.navBarVisible=!this.navBarVisible},showArrow:function(t){console.log(t)}}}),q=R,D=(n("b165"),Object(u["a"])(q,P,V,!1,null,"3db77609",null)),U=D.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-title"},[t._v("\n\t"+t._s(t.title)+"\n\t"),n("Search",{staticClass:"search"})],1)},K=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"Wyszukaj ucznia, np. 'xd'",spellcheck:"false"},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},function(e){return t.inputChanged()}]}})])},H=[],J=n("2f62"),G=o["a"].extend({name:"Search",data:function(){return{searchText:""}},methods:Object($["a"])({},Object(J["b"])(["searchStudents","showAllStudents"]),{inputChanged:function(){0==!!this.searchText&&this.showAllStudents(),this.searchStudents(this.searchText)}})}),W=G,Z=(n("1ae5"),Object(u["a"])(W,M,H,!1,null,"58930d9a",null)),Q=Z.exports,X=o["a"].extend({name:"NavTitle",components:{Search:Q},props:{title:{default:"Uczniowie"}}}),Y=X,tt=(n("1c7a"),Object(u["a"])(Y,F,K,!1,null,"0586120b",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"student"},[n("div",{attrs:{id:"header"}},[n("div",{attrs:{id:"name"}},[t._v(t._s(t.student.imie)+" "+t._s(t.student.nazwisko))]),n("div",{attrs:{id:"tools"}},[n("i",{staticClass:"fas fa-edit"}),n("i",{staticClass:"fas fa-trash-alt",on:{click:t.deleteStudent}})])]),n("div",{attrs:{id:"content"}},[n("div",{attrs:{id:"klasa"}},[t._v("\n\t\t\tKlasa:\n\t\t\t"),n("span",{staticClass:"info"},[t._v(t._s(t.student.klasa))])]),n("div",{attrs:{id:"telefon"}},[t._v("\n\t\t\tTelefon:\n\t\t\t"),n("span",{staticClass:"info"},[t._v(t._s(t.student.telefon))])])])])},ot=[],it=o["a"].extend({name:"Student",props:{student:{type:Object,required:!0}},methods:Object($["a"])({},Object(J["b"])({storeDeleteStudent:"deleteStudent"}),{deleteStudent:function(){console.log("deleting student nr. ".concat(this.student.id)),this.storeDeleteStudent(this.student.id)}})}),at=it,rt=(n("319a"),Object(u["a"])(at,nt,ot,!1,null,null,null)),st=rt.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-student student"},[n("div",{attrs:{id:"header"}},[n("div",{attrs:{id:"name"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.imie,expression:"newStudent.imie"}],attrs:{type:"text",id:"imie",placeholder:"Imię"},domProps:{value:t.newStudent.imie},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"imie",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.nazwisko,expression:"newStudent.nazwisko"}],attrs:{type:"text",id:"nazwisko",placeholder:"Nazwisko"},domProps:{value:t.newStudent.nazwisko},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"nazwisko",e.target.value)}}})])]),n("div",{attrs:{id:"content"}},[n("div",{attrs:{id:"klasa"}},[t._v("\n\t\t\tKlasa:\n\t\t\t"),n("span",{staticClass:"info"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.klasa,expression:"newStudent.klasa"}],attrs:{type:"text",id:"klasa",placeholder:"3d"},domProps:{value:t.newStudent.klasa},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"klasa",e.target.value)}}})])]),n("div",{attrs:{id:"telefon"}},[t._v("\n\t\t\tTelefon:\n\t\t\t"),n("span",{staticClass:"info"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.telefon,expression:"newStudent.telefon"}],attrs:{type:"text",id:"telefon",placeholder:"666666666"},domProps:{value:t.newStudent.telefon},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"telefon",e.target.value)}}})])]),n("div",{attrs:{id:"checkmark"},on:{click:t.addUser}},[n("i",{staticClass:"fas fa-check"})])])])},lt=[],ct=n("a4bb"),dt=n.n(ct),ft={imie:"Imię",nazwisko:"Nazwisko",klasa:"Klasa",telefon:"Telefon"},pt=o["a"].extend({name:"NewStudent",data:function(){return{newStudent:{imie:"",nazwisko:"",klasa:"",telefon:""}}},methods:Object($["a"])({},Object(J["b"])(["addStudent"]),{addUser:function(){var t=Object(A["a"])(regeneratorRuntime.mark(function t(){var e,n,o,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=!1,n=dt()(this.newStudent),o=0;case 3:if(!(o<n.length)){t.next=17;break}if(i=n[o],a=this.newStudent[i],0!=!!a){t.next=10;break}return e=!0,alert("".concat(ft[i]," niepoprawne.")),t.abrupt("break",17);case 10:if("telefon"!==i||!isNaN(a)){t.next=14;break}return e=!0,alert("".concat(ft[i]," powinien być numerem.")),t.abrupt("break",17);case 14:o++,t.next=3;break;case 17:if(!e){t.next=19;break}return t.abrupt("return");case 19:return this.$emit("newStudentAdded"),t.next=22,this.addStudent(this.newStudent);case 22:t.sent;case 23:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()})}),ht=pt,vt=(n("058b"),Object(u["a"])(ht,ut,lt,!1,null,null,null)),gt=vt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-button",on:{click:function(e){return t.$emit("addButtonClick")}}},[n("i",{staticClass:"fas fa-user-plus"})])},bt=[],wt=o["a"].extend({name:"AddButton"}),St=wt,yt=(n("e75f"),Object(u["a"])(St,mt,bt,!1,null,"1bdf3e8a",null)),kt=yt.exports,xt=o["a"].extend({name:"Authorized",components:{NavBar:U,NavTitle:et,AddButton:kt,Student:st,NewStudent:gt},data:function(){return{showNewStudentDialog:!1}},computed:Object($["a"])({},Object(J["c"])(["students"]),{visibleStudents:function(){var t=B()(this.students);return console.groupCollapsed("visibleStudents"),console.log("students: ",t),console.groupEnd(),t.filter(function(t){return t.visible})}}),methods:Object($["a"])({},Object(J["b"])(["loadStudents"]),{addButtonClick:function(){this.showNewStudentDialog=!this.showNewStudentDialog}}),mounted:function(){var t=Object(A["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadStudents();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),_t=xt,jt=(n("e2b1"),n("b819"),Object(u["a"])(_t,N,T,!1,null,"5076da2e",null)),Ct=jt.exports;o["a"].use(d["a"]);var Ot=new d["a"]({mode:"history",base:"",routes:[{path:"/",name:"Unauthorized",component:z},{path:"/zalogowany",name:"Authorized",component:Ct}]}),zt=n("e814"),Nt=n.n(zt),Tt=(n("55dd"),n("6762"),n("2fdb"),n("6b54"),n("5d73")),At=n.n(Tt);function Et(t){if(0===t.length)return 0;if(1===t.length)return 0===t[0]?1:0;if(2===t.length)return t[0]>0?0:1==t[1]?2:1;for(var e=1;e<t.length;e++)if(t[e]-t[e-1]!=1){var n=t[e-1];return console.log("firstValue:",n),n+1}return t[0]>0?0:t[t.length-1]+1}o["a"].use(J["a"]);var Bt=new J["a"].Store({state:{students:{}},mutations:{add:function(t,e){if(e.constructor===Array){console.log("Adding array of students.");var n=!0,i=!1,a=void 0;try{for(var r,s=At()(e);!(n=(r=s.next()).done);n=!0){var u=r.value;u.visible=!0,o["a"].set(t.students,u.id,u)}}catch(l){i=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}else e.hasOwnProperty("id")?(console.log("Adding single student object."),e.visible=!0,o["a"].set(t.students,e.id,e)):console.error("Store `add` mutation neither array or an object containing `id` property.")},delete:function(t,e){o["a"].delete(t.students,e)},changeVisibility:function(t,e){o["a"].set(t.students[e.id],"visible",e.newVisibility),console.log(t.students[e.id])}},actions:{loadStudents:function(){var t=Object(A["a"])(regeneratorRuntime.mark(function t(e){var n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,o=e.commit,t.abrupt("return",fetch("".concat(S,"api/uczniowie.php"),{method:"GET",headers:{"Content-Type":"application/json; charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}}).then(function(t){return!0!==t.ok&&console.error("Nie udało się zdobyć uczniów."),t.json()}).then(function(t){return console.log("commit('add',",t,");"),o("add",t),console.log("state.students",n.students),n.students}).catch(function(t){console.error(t)}));case 2:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),searchStudents:function(t,e){var n=t.state,o=t.commit;console.log("searching students for ".concat(e)),e=e.toLowerCase(),B()(n.students).forEach(function(t){console.log("student",t);for(var n=B()(t),i=0;i<n.length;i++){var a=n[i];if("boolean"!==typeof a)if(isNaN(a)){if(a.toLowerCase().includes(e)){o("changeVisibility",{id:t.id,newVisibility:!0});break}o("changeVisibility",{id:t.id,newVisibility:!1})}else a=a.toString()}}),console.log("state after search: ",n.students)},showAllStudents:function(t){var e=t.state,n=t.commit;B()(e.students).forEach(function(t){n("changeVisibility",{id:t.id,newVisibility:!0})})},addStudent:function(){var t=Object(A["a"])(regeneratorRuntime.mark(function t(e,n){var o,i,a,r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.state,i=e.commit,a=dt()(o.students).map(function(t){return Nt()(t,10)}).sort(function(t,e){return t-e}),r=Et(a),s=m()(I()({id:r.toString()},n)),console.log("requestBody:",s),t.abrupt("return",fetch("".concat(S,"api/uczniowie.php"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:s}).then(function(t){if(!0===t.ok)return t.json();console.error("Nie udało się dodać ucznia.")}).then(function(t){return console.log("commit('add',",t,");"),i("add",t.uczen),console.log("state.students",o.students),o.students}).catch(function(t){console.error(t)}));case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),deleteStudent:function(){var t=Object(A["a"])(regeneratorRuntime.mark(function t(e,n){var o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=e.state,i=e.commit,t.abrupt("return",fetch("".concat(S,"api/uczniowie.php"),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:m()({id:n})}).then(function(t){return!0!==t.ok&&console.error("Nie udało się usunąć ucznia."),t.json()}).then(function(t){return console.log("commit('add',",t,");"),i("delete",t.uczen),console.log("state.students",o.students),o.students}).catch(function(t){console.error(t)}));case 2:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()},getters:{}});o["a"].config.productionTip=!1,new o["a"]({router:Ot,store:Bt,render:function(t){return t(c)}}).$mount("#app")},e2b1:function(t,e,n){"use strict";var o=n("b98a"),i=n.n(o);i.a},e75f:function(t,e,n){"use strict";var o=n("7bb7"),i=n.n(o);i.a},fe51:function(t,e,n){}});
//# sourceMappingURL=app.ffa563d7.js.map